@model IEnumerable<TreinamentoWeb1.Models.Entity.users>

@{
    ViewBag.Title = "Index";
}

<h2>Usuários</h2>

<br>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Filtros</h3>
    </div>
    <div class="panel-body">
        @using (Html.BeginForm("Index", "Users", FormMethod.Post, new { @class = "form-inline" }))
        {
            @Html.AntiForgeryToken()

            <div class="row">
                <div class="form-group col-md-4">
                    <label class="control-label col-md-4" for="filter-name">Nome:</label>
                    <div class="col-md-9">
                        @Html.TextBox("name", string.Empty, new { @class = "form-control" })
                    </div>
                </div>

                <div class="form-group col-md-4">
                    <label class="control-label col-md-4" for="filter-ldapuid">Ldap Uid:</label>
                    <div class="col-md-9">
                        @Html.TextBox("ldapuid", string.Empty, new { @class = "form-control" })
                    </div>
                </div>

                <div class="form-group col-md-4">
                    <label class="radio-inline">
                        @Html.RadioButton("actives", "all", true) Todos
                    </label>

                    <label class="radio-inline">
                        @Html.RadioButton("actives", "actives", false) Ativos
                    </label>

                    <label class="radio-inline">
                        @Html.RadioButton("actives", "inactives", false) Inativos
                    </label>
                </div>
                </div>
                <div class="row">
                <div class="col-md-12 text-right">
                    <button id="filtrar" type="submit" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="left"
                            title="Filtrar">
                        <span class="glyphicon glyphicon-filter"></span>
                    </button>

                    <a id="limpar" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="left"
                            title="Limpar" href="@Url.Action("Index")">
                        <span class="glyphicon glyphicon-refresh"></span>
                    </a>
                </div>
            </div>
        }
    </div>
</div>

<p>
    @Html.ActionLink("Novo Usuário", "Create", "Create", new { @class = "btn btn-success pull-right" })
</p>

<br>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ldap_uid)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ative)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.password)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ldap_uid)
            </td>
            <td>
                @(item.ative ? Html.Raw("<span class='label label-success'>" + Resources.Strings.yes + "</span>")
                             : Html.Raw("<span class='label label-danger'>" + Resources.Strings.no + "</span>"))
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.password)
            </td>
            <td>
                <a id="editar" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="left"
                   title="Limpar" href="@Url.Action("Edit", "Users", new { id = item.id })">
                    <span class="glyphicon glyphicon-edit"></span>
                </a>

                <a id="visualizar" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="left"
                   title="Limpar" href="@Url.Action("Details", "Users", new { id = item.id })">
                    <span class="glyphicon glyphicon-eye-open"></span>
                </a>

                <a id="excluir" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="left"
                   title="Limpar" href="@Url.Action("Delete", "Users", new { id = item.id })">
                    <span class="glyphicon glyphicon-trash"></span>
                </a>
            </td>
        </tr>
    }

</table>

<nav aria-label="Navegação de página">
    <ul class="pagination">
        <li class="page-item">
            @Html.ActionLink("<", "Index", "Users", new { page = (@ViewBag.Page - 1 <= 0 ? 1 : @ViewBag.Page - 1), name = @ViewBag.Name, ldapuid = @ViewBag.Ldapuid, actives = @ViewBag.Actives }, null)
        </li>

        <li class="active"><a class="page-number">@ViewBag.Page</a></li>

        <li class="page-item">
            @Html.ActionLink(">", "Index", "Users", new { page = (@ViewBag.Page + 1 > Math.Ceiling((decimal)@ViewBag.Count / 10) ? @ViewBag.Page : @ViewBag.Page + 1), name = @ViewBag.Name, ldapuid = @ViewBag.Ldapuid, actives = @ViewBag.Actives }, null)
        </li>
    </ul>
</nav>